{{ $pages := union .Sections .Pages }}
{{ range .Translations }}{{ $pages = $pages | lang.Merge (union .Sections .Pages) }}{{ end }}
{{ $pages := where $pages "Params.unlisted" "!=" true }}

[
{{- range $i, $p := $pages -}}
    {{- if $i }},{{ end -}}
    {
        "title": {{ $p.Title | jsonify }},
        "description": {{ $p.Description | jsonify }},
        "content": {{ $p.Plain | jsonify }},
        "tags": {{ $p.Params.tags | jsonify }},
        "permalink": {{ $p.Permalink | jsonify }},
        "date": {{ $p.Date.Format "2006-01-02" | jsonify }},
        "lang": {{ $p.Lang | jsonify }}
    }
{{- end -}}
]